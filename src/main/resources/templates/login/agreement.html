<!DOCTYPE html>
<html lang="ko">
<head>
    <link rel="stylesheet" href="/css/basic.css">
    <link rel="stylesheet" href="/css/custom_reset.css">
    <meta charset="UTF-8">
    <title>약관동의</title>
    <style>
        body{
            background-color: #f9f9f9;
        }
        .terms-container, .terms-box {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 20px;
            background-color: white;
            margin-top: 40px;
        }
        .terms-box {
            border: 1px solid #ccc;
            padding: 20px;
            margin-bottom: 40px;
            background-color: white;
            height: 150px; /* 调整这个值来增加框的高度 */
            margin-top: 10px;
        }
        .terms-container {
            width: 60%;
            margin: 0 auto;
            margin-top: 50px;
        }
        .terms-title {
            font-size: 24px;
            margin-bottom: 10px;
        }
        .terms-text {
            font-size: 14px;
            text-align: justify;
            margin-bottom: 20px;
        }
        .agree-section {
            margin-bottom: 50px;
        }
        .checkbox {
            margin-right: 10px;
        }
        .agree-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .progress-bar {
            width: 0%;
            height: 30px;
            background-color: #e59037;
            text-align: center;
            line-height: 30px;
            color: white;
            border-radius: 5px;
            transition: width 0.4s ease-in-out;
            display:none;
        }
        .steps-container {
            display: flex;
            justify-content: space-between;
            list-style-type: none;
            padding: 0;
            margin: 0 auto;
            width: 45%;
            position: relative; /* 添加相对定位 */
            margin-top: 250px;
        }

        .step {
            width: 20%;
            position: relative;
            text-align: center;
            flex: 1; /* 使每个步骤平均分配宽度 */
        }

        .step::after {
            content: '';
            width: 100%;
            height: 2px;
            background: #b9adad;
            position: absolute;
            left: 0;
            top: 50%;
            z-index: -1;
        }


        /* 去除最后一个步骤后面的线条 */
        .step:last-child::after {
            content: none;
        }

        .step-icon {
            width: 90px;
            height: 90px;
            display: flex;
            align-items: center; /* 垂直居中 */
            justify-content: center; /* 水平居中 */
            border: 2px solid #ddd;
            border-radius: 50%;
            background: white;
            color: black;
            font-weight: bold;
            transition: color 0.3s, background-color 0.3s, border-color 0.3s;
        }

        .step.active .step-icon {
            border-color: #e59037;
            color: white;
            background: #e59037;
        }
        .button-container {
            text-align: center;
            margin-top: 50px;
        }
        button {
            padding: 10px 20px;
            background-color: white;
            border: 2px solid #ccc;
            color: black;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            display: inline-block;
        }
        button:hover {
            background-color: #e59037;
            color: white;
            transform: scale(1.05);
        }

    </style>
</head>
<body>
<div th:replace="common/header :: header"></div>

<div class="progress-container">
    <div class="progress-bar" id="myBar">0%</div>
</div>

<div class="steps-container">
    <div class="step active" id="step1">
        <span class="step-icon">약관동의</span>
    </div>
    <div class="step" id="step2">
        <span class="step-icon">회원정보</span>
    </div>
    <div class="step" id="step3">
        <span class="step-icon">가입성공</span>
    </div>
    <div class="step" id="step4">
        <span class="step-icon">로그인</span>
    </div>
</div>

<form id="terms-form">
    <div class="terms-container">

        <div class="agree-section">
            <input type="checkbox" class="checkbox" id="agree-all">
            <label for="agree-all" class="agree-title">전체 동의</label>
        </div>

            <input type="checkbox" class="checkbox" id="community-terms" required>
            <label for="community-terms" class="agree-title">커뮤니티 이용 약관 (필수)</label>
            <div class="terms-box">
                <div class="terms-text" style="overflow-y: scroll; max-height: 120px;">
                    <h3>1. 약관의 수락</h3>
                    <p>1.1 이 커뮤니티를 이용하는 모든 사용자는 본 약관의 조건을 숙지하고 준수할 것을 동의합니다.</p>
                    <p>1.2 본 약관은 언제든지 수정될 수 있으며, 사용자는 변경 사항을 검토하고 수락해야 합니다. 변경 사항은 커뮤니티 내에 공지될 것입니다.</p>

                    <h3>2. 회원 가입</h3>
                    <p>2.1 회원 가입 시 제공하는 정보는 정확하고 최신 정보여야 합니다.</p>
                    <p>2.2 가입한 계정은 개인 정보를 보호하고 다른 사람과 공유하지 않아야 합니다.</p>

                    <h3>3. 커뮤니티 규칙</h3>
                    <p>3.1 우리 커뮤니티에서는 모든 회원이 상호 존중하고 예의 바르게 행동해야 합니다.</p>
                    <p>3.2 폭력적인, 모욕적인, 혐오적인 또는 불법적인 콘텐츠를 게시하거나 공유해서는 안 됩니다.</p>
                    <p>3.3 저작권, 상표권 또는 기타 법적 권리를 침해하는 콘텐츠를 게시해서는 안 됩니다.</p>

                    <h3>4. 개인 정보 보호</h3>
                    <p>4.1 사용자 정보는 개인 정보 보호 정책에 따라 관리되며, 이에 동의한 사용자만이 접근할 수 있습니다.</p>
                    <p>4.2 다른 사용자의 개인 정보를 무단으로 수집, 공개 또는 공유해서는 안 됩니다.</p>

                    <h3>5. 책임과 제한</h3>
                    <p>5.1 사용자는 자신의 활동에 대한 모든 책임을 져야 합니다.</p>
                    <p>5.2 커뮤니티 운영자는 언제든지 위반 사항을 조사하고, 적절한 조치를 취할 권리를 가집니다.</p>

                    <h3>6. 계정 해지</h3>
                    <p>6.1 사용자는 언제든지 계정을 해지할 수 있습니다.</p>
                    <p>6.2 계정 해지 시에도 본 약관의 조항은 계속 적용됩니다.</p>

                    <h3>7. 약관의 해석</h3>
                    <p>7.1 본 약관의 해석은 커뮤니티 운영자가 최종 결정합니다.</p>

                    <h3>8. 연락처</h3>
                    <p>8.1 문의 사항이나 불만 사항이 있을 경우, 커뮤니티 운영자에게 연락할 수 있습니다.이 약관은 본 커뮤니티를 이용하는 모든 사용자에게 적용되며, 이를 준수하지 않는 경우 계정 해지 및 법적 조치가 취해질 수 있습니다.</p>
                </div>
            </div>

            <input type="checkbox" class="checkbox" id="info-sharing" required>
            <label for="info-sharing" class="agree-title">정보 공유 약관 (필수)</label>
        <div class="terms-box">
            <div class="terms-text" style="overflow-y: scroll; max-height: 120px;">
                <h3>정보 공유에 대한 약관</h3>
                <p>이 정보 공유 약관은 커뮤니티 이용자 간의 정보 공유에 관한 규칙을 규정합니다.</p>

                <h3>1. 정보 공유 동의</h3>
                <p>1.1 커뮤니티 이용자들은 정보를 서로 공유할 수 있습니다. 정보 공유는 자율적이며 선택 사항입니다.</p>

                <h3>2. 개인 정보 보호</h3>
                <p>2.1 정보 공유 시 개인 정보를 포함한 민감한 정보를 공유하지 않아야 합니다. 개인 정보 보호는 중요합니다.</p>

                <h3>3. 불법 및 해를 끼치는 정보 공유 금지</h3>
                <p>3.1 불법 활동을 촉진하거나 다른 사용자에게 해를 끼칠 수 있는 정보를 공유해서는 안 됩니다.</p>

                <h3>4. 정보 공유의 책임</h3>
                <p>4.1 정보 공유는 사용자의 책임 아래 이루어집니다. 다른 사용자를 존중하고 적절하게 정보를 공유하세요.</p>

                <h3>5. 약관의 변경</h3>
                <p>5.1 정보 공유 약관은 변경될 수 있으며, 변경 시 사용자에게 통지됩니다. 변경된 약관을 검토하고 동의해야 합니다.</p>
            </div>
        </div>

            <input type="checkbox" class="checkbox" id="personal-info-collection" required>
            <label for="personal-info-collection" class="agree-title">개인 정보 수집 및 이용 동의 (필수)</label>
        <div class="terms-box">
            <div class="terms-text" style="overflow-y: scroll; max-height: 120px;">
                <h3>개인 정보 수집 및 이용 동의</h3>
                <p>이 개인 정보 수집 및 이용 약관은 사용자의 개인 정보를 수집하고 이용하는 방법과 목적을 설명합니다.</p>

                <h3>1. 수집하는 정보</h3>
                <p>1.1 개인 정보 수집 시, 아래와 같은 정보가 수집될 수 있습니다:</p>
                <ul>
                    <li>이름</li>
                    <li>이메일 주소</li>
                    <li>연락처 정보</li>
                    <li>주소</li>
                    <li>출생일</li>
                    <li>성별</li>
                    <li>사용자의 관심사 및 선호</li>
                </ul>

                <h3>2. 정보 이용 목적</h3>
                <p>2.1 수집한 정보는 다음 목적을 위해 이용될 수 있습니다:</p>
                <ul>
                    <li>계정 관리</li>
                    <li>서비스 제공</li>
                    <li>고객 지원 및 문의 응답</li>
                    <li>개인 맞춤 서비스 제공</li>
                    <li>향상된 사용자 경험 제공</li>
                    <li>마케팅 및 프로모션 목적</li>
                </ul>

                <h3>3. 정보 보호 및 공유</h3>
                <p>3.1 개인 정보는 철저하게 보호되며, 사용자 동의 없이 제3자와 공유되지 않습니다. 예외적으로, 정보 공개는 법적 요구 사항을 준수하거나 사용자의 안전을 보호하기 위해 이루어질 수 있습니다.</p>

                <h3>4. 정보 보관 기간</h3>
                <p>4.1 개인 정보는 이용 목적을 달성한 후에도 필요한 경우에 한하여 보존될 수 있습니다. 보존 기간은 이용 목적에 따라 다를 수 있으며, 법률적 요구 사항을 준수하기 위해 정보를 보관할 수 있습니다.</p>

                <h3>5. 동의 철회</h3>
                <p>5.1 사용자는 언제든지 개인 정보 수집 및 이용에 대한 동의를 철회할 수 있습니다. 동의 철회 시 일부 서비스 이용이 제한될 수 있습니다.</p>

                <h3>6. 약관의 변경</h3>
                <p>6.1 개인 정보 수집 및 이용 약관은 변경될 수 있으며, 변경 시 사용자에게 통지됩니다. 변경된 약관을 검토하고 동의해야 합니다.</p>

                <h3>7. 연락처</h3>
                <p>7.1 개인 정보 수집 및 이용에 관한 문의 사항이나 불만 사항이 있을 경우, 저희에게 언제든지 연락하실 수 있습니다. 연락처 정보는 웹 사이트 내에서 제공됩니다.</p>
            </div>
        </div>

            <input type="checkbox" class="checkbox" id="third-party-info" required>
            <label for="third-party-info" class="agree-title">개인 정보 제3자에 제공 동의 (필수)</label>
        <div class="terms-box">
            <div class="terms-text" style="overflow-y: scroll; max-height: 120px;">
                <h3>개인 정보 제3자에 정보 제공 동의</h3>
                <p>이 동의 약관은 사용자의 개인 정보를 제3자에게 제공하는 방법과 목적을 설명합니다.</p>

                <h3>1. 제3자 정보 제공</h3>
                <p>1.1 개인 정보는 다음 목적을 위해 제3자에게 제공될 수 있습니다:</p>
                <ul>
                    <li>마케팅 및 광고 파트너</li>
                    <li>서비스 제공 업체</li>
                    <li>법적 요구 사항을 준수하기 위해</li>
                </ul>

                <h3>2. 정보 보호 및 공유</h3>
                <p>2.1 개인 정보는 제3자에게 제공되기 전에 철저하게 보호되며, 사용자 동의 없이 무단으로 제3자에게 공유되지 않습니다. 예외적으로, 정보 공개는 법적 요구 사항을 준수하거나 사용자의 안전을 보호하기 위해 이루어질 수 있습니다.</p>

                <h3>3. 동의 철회</h3>
                <p>3.1 사용자는 언제든지 개인 정보 제3자 제공에 대한 동의를 철회할 수 있습니다. 동의 철회 시 일부 서비스 이용이 제한될 수 있습니다.</p>

                <h3>4. 약관의 변경</h3>
                <p>4.1 개인 정보 제3자에 정보 제공 동의 약관은 변경될 수 있으며, 변경 시 사용자에게 통지됩니다. 변경된 약관을 검토하고 동의해야 합니다.</p>

                <h3>5. 연락처</h3>
                <p>5.1 개인 정보 제3자 제공에 관한 문의 사항이나 불만 사항이 있을 경우, 저희에게 언제든지 연락하실 수 있습니다. 연락처 정보는 웹 사이트 내에서 제공됩니다.</p>
            </div>
        </div>
        <div class="button-container">
            <button type="submit" >동의하고 계속하기</button>
        </div>
    </div>
</form>

<!-- 타임리프를 사용하여 서버로부터 전달받은 tempEmail 값을 사용합니다. -->
<script th:inline="javascript">

    // 전체 동의 체크박스 로직
    document.getElementById('agree-all').addEventListener('change', function (e) {
        var checkboxes = document.querySelectorAll('.checkbox');
        for (var i = 0; i < checkboxes.length; i++) {
            checkboxes[i].checked = this.checked;
        }
    });

    document.getElementById('terms-form').addEventListener('submit', function(e) {
        e.preventDefault(); // 폼의 기본 제출 동작을 방지

        // 필수 체크박스가 모두 선택되었는지 확인
        var allChecked = [...this.querySelectorAll('.checkbox:not(#agree-all)')].every(checkbox => checkbox.checked);
        var tempEmail = [[${tempEmail}]]; // JSP/Thymeleaf 등 서버 사이드 템플릿에서 세션 값 주입

        if (allChecked && tempEmail) {
            // 모든 체크박스가 선택되었고 tempEmail 세션이 존재하면 'additional-info' 페이지로 이동
            console.log("'additional-info' 페이지로 이동")
            window.location.href = '/login/additional-info';
        } else if (allChecked) {
            // 모든 체크박스가 선택되었지만 tempEmail 세션이 없으면 'enroll' 페이지로 이동
            console.log("tempEmail 세션이 없으면 'enroll' 페이지로 이동")
            window.location.href = '/login/enroll';
        } else {
            // 필수 체크박스가 모두 선택되지 않았다면 경고 메시지 표시
            alert('모든 약관에 동의해주세요.');
        }
    });
</script>
<script>
    // JavaScript代码用于更新进度条和箭头状态

    let currentStep = 1;

    function updateProgressBar() {
        const progressBar = document.getElementById('myBar');
        const stepElement = document.getElementById(`step${currentStep}`);
        progressBar.style.width = `${(currentStep - 1) * 33.33}%`;

        // 删除所有其他步骤的active类
        const allSteps = document.querySelectorAll('.step');
        allSteps.forEach(step => {
            step.classList.remove('active');
        });

        stepElement.classList.add('completed', 'active');
        currentStep++;
    }

    // 立即调用以激活第一步
    updateProgressBar();

</script>

</body>
</html>
